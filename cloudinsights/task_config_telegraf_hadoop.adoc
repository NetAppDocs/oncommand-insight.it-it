---
sidebar: sidebar 
permalink: task_config_telegraf_hadoop.html 
keywords: telegraf, installation, install, Hadoop 
summary: Configurazione del data collector Hadoop 
---
= Data Collector Hadoop
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights utilizza questo data collector per raccogliere le metriche da Hadoop.



== Installazione

. Da *osservabilità > Collector*, fare clic su *+Data Collector*. Scegli Hadoop.
+
Selezionare il sistema operativo o la piattaforma su cui è installato Telegraf Agent.

. Se non è già stato installato un Agent per la raccolta o se si desidera installare un Agent per un sistema operativo o una piattaforma differente, fare clic su _Show Instructions_ (Mostra istruzioni) per espandere la link:task_config_telegraf_agent.html["Installazione dell'agente"] istruzioni.
. Selezionare il tasto di accesso dell'agente da utilizzare con questo data collector. È possibile aggiungere un nuovo Agent Access Key facendo clic sul pulsante *+ Agent Access Key*. Best practice: Utilizzare un Agent Access Key diverso solo quando si desidera raggruppare i data raccoglitori, ad esempio per sistema operativo/piattaforma.
. Seguire la procedura di configurazione per configurare il data collector. Le istruzioni variano a seconda del tipo di sistema operativo o piattaforma utilizzata per la raccolta dei dati.


image:HadoopDCConfigLinux-1.png["Configurazione di Hadoop"]
image:HadoopDCConfigLinux-2.png["Configurazione di Hadoop"]



== Setup (Configurazione)

Un'implementazione Hadoop completa comprende i seguenti componenti:

* NameNode: Il sistema primario HDFS (Distributed file System) di Hadoop. Coordina una serie di DataNode.
* Secondary NameNode (nodo secondario): Un failover a caldo per il nodo principale di NameNode. In Hadoop la promozione a NameNode non avviene automaticamente. Secondary NameNode raccoglie le informazioni da NameNode per essere pronto per essere promosso quando necessario.
* DataNode: Proprietario effettivo dei dati.
* ResourceManager: Il sistema primario di calcolo (yarn). Coordina una serie di NodeManager.
* NodeManager: La risorsa per il calcolo. Posizione effettiva per l'esecuzione delle applicazioni.
* JobHistoryServer: Responsabile della manutenzione di tutte le richieste relative alla cronologia del lavoro.


Il plugin Hadoop si basa sul plugin di telegraf, Jolokia. Come requisito per raccogliere informazioni da tutti i componenti Hadoop, JMX deve essere configurato ed esposto tramite Jolokia su tutti i componenti.



=== Compatibilità

La configurazione è stata sviluppata rispetto alla versione 2.9 di Hadoop.



=== Configurazione



==== Jolokia Agent Jar

Per tutti i singoli componenti, è necessario scaricare una versione del file Jar dell'agente di Jlokia. La versione testata con è stata link:https://jolokia.org/download.html["Agente di Jookia 1.6.0"].

Le istruzioni riportate di seguito presuppongono che il file jar scaricato (jookia-jvm-1.6.0-Agent.jar) sia posizionato nella posizione '/opt/hadoop/lib/'.



==== NameNode

Per configurare NameNode in modo da esporre l'API di Jookia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_NAMENODE_OPTS="$HADOOP_NAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7800,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8000 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8000 above) and Jolokia (7800). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== Node secondario

Per configurare il nodo del nome secondario in modo che esponga l'API di Jookia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_SECONDARYNAMENODE_OPTS="$HADOOP_SECONDARYNAMENODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7802,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8002 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8002 above) and Jolokia (7802). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== DataNode

Per configurare i DataNode in modo che espongano l'API di Jookia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_DATANODE_OPTS="$HADOOP_DATANODE_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7801,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8001 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8001 above) and Jolokia (7801). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== ResourceManager

Per configurare ResourceManager in modo da esporre l'API di Jlokia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export YARN_RESOURCEMANAGER_OPTS="$YARN_RESOURCEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7803,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8003 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8003 above) and Jolokia (7803). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== NodeManager

Per configurare i NodeManager in modo che espongano l'API di Jookia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export YARN_NODEMANAGER_OPTS="$YARN_NODEMANAGER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7804,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8004 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8004 above) and Jolokia (7804). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


==== Server JobHistory

Per configurare il server di StoriaLavoro in modo che esponga l'API di Jookia, è possibile configurare quanto segue in <HADOOP_HOME>/etc/hadoop/hadoop-env.sh:

[listing]
----
export HADOOP_JOB_HISTORYSERVER_OPTS="$HADOOP_JOB_HISTORYSERVER_OPTS -javaagent:/opt/hadoop/lib/jolokia-jvm-1.6.0-agent.jar=port=7805,host=0.0.0.0 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8005 -Dcom.sun.management.jmxremote.password.file=$HADOOP_HOME/conf/jmxremote.password"
You can choose a different port for JMX (8005 above) and Jolokia (7805). If you have an internal IP to lock Jolokia onto you can replace the "catch all" 0.0.0.0 by your own IP. Notice this IP needs to be accessible from the telegraf plugin. You can use the option '-Dcom.sun.management.jmxremote.authenticate=false' if you don't want to authenticate. Use at your own risk.
----


== Oggetti e contatori

Vengono raccolti i seguenti oggetti e i relativi contatori:

[cols="<.<,<.<,<.<,<.<"]
|===
| Oggetto: | Identificatori: | Attributi: | Punti dati: 


| Node secondario Hadoop | Cluster
Namespace
Server | Nome del nodo
IP nodo
Informazioni di compilazione
Versione | Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 


| Hadoop NodeManager | Cluster
Namespace
Server | Nome del nodo
IP nodo | Container assegnati
Allocazione della memoria
Memoria allocata Oportunistica
Core virtuali allocati Oportunistic
Core virtuali allocati
Memoria disponibile
Core virtuali disponibili
Directory Bad Local
Directory Bad Log
Dimensione cache prima della pulizia
Tempo medio durata avvio contenitore
Durata avvio container numero di operazioni
Contenitori completati
Contenitori non riusciti
Initing container
Contenitori uccisi
Container lanciati
Container Reiniting
Contenitori riportati in seguito a guasto
Esecuzione di container
Directory locali valide per l'utilizzo del disco
Directory di registro di utilizzo del disco valide
Byte eliminati privati
Byte eliminati pubblici
Container in esecuzione opportunistica
Byte eliminati totale
Connessioni shuffle
Casuale byte di output
Uscite shuffle non riuscite
Uscite shuffle OK
Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 


| ResourceManager di Hadoop | Cluster
Namespace
Server | Nome del nodo
IP nodo | Avg. Ritardo avvio ApplicationMaster
ApplicationMaster Launch Delay Number
ApplicationMaster Register Delay (ritardo medio registro ApplicationMaster
ApplicationMaster Register Delay Number
Numero attivo NodeManager
Numero di dismissione di NodeManager
Numero di decomposizione NodeManager
Numero perso NodeManager
Numero di riavvio di NodeManager
Numero di arresto NodeManager
Numero buono NodeManager
Limite memoria NodeManager
Limite dei core virtuali NodeManager
Capacità utilizzata
Applicazioni attive
Utenti attivi
Container aggregati allocati
Aggregate Container anticipati
Aggregate Containers rilasciati
Memoria aggregata - secondi anticipati
Contenitori locali nodo aggregato allocati
Aggrega contenitori switch off allocati
Contenitori locali Ack aggregati allocati
Memorizzazione dei core virtuali aggregati in pochi secondi
Container assegnati
Memoria allocata
Core virtuali allocati
Tempo medio ritardo allocazione primo contenitore tentativo applicazione
Primo tentativo di applicazione numero di ritardo allocazione contenitore
Applicazioni completate
Applicazioni non riuscite
Applicazioni uccise
Richieste in sospeso
Applicazioni in esecuzione
Domande inviate
Memoria disponibile
Core virtuali disponibili
Contenitori in sospeso
Memoria in sospeso
Core virtuali in sospeso
Contenitori riservati
Memoria riservata
Core virtuali riservati
Memory ApplicationMaster utilizzato
Core virtuali ApplicationMaster utilizzato
Capacità utilizzata
Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 


| DataNode Hadoop | Cluster
Namespace
Server | Nome del nodo
IP nodo
ID cluster
Versione | Conteggio transceiver
Trasmette in corso
Capacità cache
Cache utilizzata
Capacità
DFS utilizzato
Totale perdita capacità stimata
Ultimo tasso di guasto del volume
Numero blocchi nella cache
Numero di blocchi non inserito nella cache
Impossibile disinstallare il numero di blocchi nella cache
Numero volumi non riuscito
Capacità rimanente
Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 


| Node di Hadoop | Cluster
Namespace
Server | Nome del nodo
IP nodo
Ultima scrittura dell'ID della transazione
Tempo trascorso dall'ultima modifica caricata
Stato HA
Stato del file system
ID pool di blocchi
ID cluster
Informazioni di compilazione
Conteggio versioni distinto
Versione | Capacità blocco
Blocchi totale
Capacità totale
Capacità utilizzata
Capacità utilizzata non DFS
Blocchi danneggiati
Totale perdita capacità stimata
Blocchi in eccesso
Battiti cardiaci scaduti
Totale file
Lunghezza coda blocco file system
Blocchi mancanti
Blocca la replica mancante con il fattore uno
Client attivi
Nodi dati morti
Decommissionamento dei nodi dati inattivo
Data Node decommissioning Live
Decomposizione dei nodi dati
Numero zone di crittografia
Nodi di dati in fase di manutenzione
File in costruzione
Nodi dati non funzionanti in manutenzione
Nodi dati attivi in manutenzione
Nodi dati Live
Storaggi obsoleti
Timeout di replica in sospeso
Messaggio nodo dati in sospeso
Blocca eliminazione in sospeso
Blocca replica in sospeso
Blocchi non replicati differiti
Replica pianificata dei blocchi
Snapshot
Directory Snapshottable
Nodi di dati inattivi
Totale file
Carico totale
Totale conteggio sincronizzazioni
Transazioni dall'ultimo punto di controllo
Transazioni dall'ultimo rotolo di registro
Blocchi non replicati
Guasti di un volume totale
Totale tempi di sincronizzazione
Oggetti Max
Operazioni blocco Aggiungi
Le operazioni consentono istantanee
Blocco operazioni batch
Blocco operazioni in coda
Blocco operativo ricevuto ed eliminato
Tempo medio report operazioni
Numero report blocco operazioni
Tempo medio report cache
Numero rapporto cache
Operazioni Crea file
Operazioni creazione di istantanee
Operazioni creare un collegamento simbolico
Operazioni Elimina file
Operazioni Elimina istantanea
Operazioni non consentire istantanea
Entrata/uscita file operazioni
File aggiunti
File creati
File eliminati
Elenco dei file
File rinominati
File troncati
Tempo di caricamento file system
Le operazioni generano il tempo medio EDEK
Le operazioni generano EDEK
Le operazioni ottengono un nodo dati aggiuntivo
Blocchi ottenere posizioni
Ottieni tempo medio di modifica
Ottieni modifica numero
Ottieni tempo medio immagine
Ottieni numero immagine
Operazioni Ottieni destinazione collegamento
Operazioni Get Listing
Dir. Snapshottable elenco operazioni
Numero di replica non programmato
Imposta tempo medio immagine
Inserisci numero immagine
Operazioni Rinomina istantanee
Tempo medio di controllo risorse
Numero tempo controllo risorse
Tempo modalità di sicurezza
Report differenziale istantanea operazioni
Report blocco Operations Storage
Replica riuscita
Tempo medio di sincronizzazione
Numero di sincronizzazione operazioni
Timeout replica
Operazioni totale
Tempo medio transazione
Batch transazioni in Sync
Numero transazione
Tempo medio riscaldamento EDEK
Numero di riscaldamento EDEK
Spazio utilizzato del pool di blocchi
Capacità cache
Cache utilizzata
Capacità senza limiti
Percentuale utilizzata pool di blocchi
Percentuale rimanente
Percentuale utilizzata
Filettature
Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 


| Hadoop JobHistoryServer | Cluster
Namespace
Server | Nome del nodo
IP nodo | Conteggio GC
Conteggio copie GC
GC Marks Sweep Compact Count
Soglia Info numero GC superata
Soglia di avvertenza numero GC superata
Tempo GC
Tempo di copia GC
GC contrassegna il tempo compatto di sweep
Tempo totale riposo extra GC
Registra il conteggio degli errori
Registra conteggio fatale
Conteggio info registri
Conteggio avvisi registri
Memoria heap impegnata
Max. Heap memoria
Heap di memoria utilizzato
Memoria max
Memoria non heap impegnata
Memoria non heap max
Memoria non heap utilizzata
Thread bloccati
Thread nuovo
Thread eseguibili
Filettature terminate
Thread in attesa temporizzata
Thread in attesa 
|===


== Risoluzione dei problemi

Per ulteriori informazioni, consultare link:concept_requesting_support.html["Supporto"] pagina.
