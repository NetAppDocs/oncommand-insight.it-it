---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configurazione del data collector Apache 
---
= Apache Data Collector
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Questo data collector consente la raccolta di dati dai server Apache nel tuo ambiente.

.Prerequisiti
* Il server HTTP Apache deve essere configurato e correttamente in esecuzione
* È necessario disporre delle autorizzazioni di sudo o amministratore per l'host/VM dell'agente
* In genere, il modulo Apache _mod_status_ è configurato per esporre una pagina nella posizione '/server-status?auto' del server Apache. L'opzione _ExtendedStatus_ deve essere attivata per raccogliere tutti i campi disponibili. Per informazioni su come configurare il server, consulta la documentazione del modulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Installazione

. Da *osservabilità > Collector*, fare clic su *+Data Collector*. Scegli Apache.
+
Selezionare il sistema operativo o la piattaforma su cui è installato Telegraf Agent.

. Se non è già stato installato un Agent per la raccolta o se si desidera installare un Agent per un sistema operativo o una piattaforma differente, fare clic su _Show Instructions_ (Mostra istruzioni) per espandere la link:task_config_telegraf_agent.html["Installazione dell'agente"] istruzioni.
. Selezionare il tasto di accesso dell'agente da utilizzare con questo data collector. È possibile aggiungere un nuovo Agent Access Key facendo clic sul pulsante *+ Agent Access Key*. Best practice: Utilizzare un Agent Access Key diverso solo quando si desidera raggruppare i data raccoglitori, ad esempio per sistema operativo/piattaforma.
. Seguire la procedura di configurazione per configurare il data collector. Le istruzioni variano a seconda del tipo di sistema operativo o piattaforma utilizzata per la raccolta dei dati.


image:ApacheDCConfigLinux.png["Configurazione di Apache"]



== Setup (Configurazione)

Il plug-in di Telegraf per HTTP Server di Apache si basa sul modulo 'mod_status' per essere attivato. Quando questa opzione è attivata, il server HTTP di Apache espone un endpoint HTML che può essere visualizzato sul browser o scartato per l'estrazione dello stato di tutte le configurazioni HTTP Server di Apache.



=== Compatibilità:

La configurazione è stata sviluppata rispetto al server HTTP Apache versione 2.4.38.



=== Abilitazione mod_status:

L'attivazione e l'esposizione dei moduli "mod_status" richiede due passaggi:

* Modulo di abilitazione
* Esposizione delle statistiche dal modulo




=== Modulo di abilitazione:

Il caricamento dei moduli è controllato dal file di configurazione sotto '/usr/local/apache/conf/httpd.conf'. Modificare il file di configurazione e rimuovere il commento dalle seguenti righe:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Esposizione delle statistiche dal modulo:

L'esposizione di 'mod_status' è controllata dal file di configurazione in '/usr/local/apache2/conf/extra/httpd-info.conf'. Assicurarsi di avere quanto segue nel file di configurazione (almeno altre direttive saranno presenti):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Per istruzioni dettagliate sul modulo "mod_status", vedere link:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentazione di Apache"]



== Oggetti e contatori

Vengono raccolti i seguenti oggetti e i relativi contatori:

[cols="<.<,<.<,<.<,<.<"]
|===
| Oggetto: | Identificatori: | Attributi: | Punti dati: 


| Apache | Namespace
Server | IP nodo
Nome del nodo
Porta
Generazione configurazione server principale
Generazione MPM server principale
Tempi di attività dei server
Si arresta | Lavoratori occupati
Byte per richiesta
Byte al secondo
Sistema figlio della CPU
Utente secondario CPU
Carico CPU
Sistema CPU
Utente CPU
Chiusura delle connessioni asincrone
Le connessioni asincrone rimangono attive
Scrittura connessioni asincrone
Connessioni totale
Durata per richiesta
Lavoratori inattivi
Carico medio (ultimi 1m)
Carico medio (ultimi 15m)
Carico medio (ultimi 5m)
Processi
Richieste al secondo
Accessi totali
Durata totale
KBytes totali
Chiusura del quadro di valutazione
Ricerche DNS nel quadro di valutazione
Finitura tabelloni
Pulizia del minimo del quadro di valutazione
Segnapunti Keep Alive
Registrazione tabelloni
Tabellone segnapunti aperto
Lettura del quadro di valutazione
Invio tabellone
Inizio tabellone segnapunti
Tabellone in attesa 
|===


== Risoluzione dei problemi

Per ulteriori informazioni, consultare link:concept_requesting_support.html["Supporto"] pagina.
